<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="boardMapper">

	<!-- Board VO resultMap -->
	<resultMap type="edu.kh.fin.board.model.vo.Board" id="board_rm">
	
		<id property="boardNo" 			column="BOARD_NO"/>
		
		<result property="boardTitle" 	column="BOARD_TITLE" />
		<result property="board" 	column="BOARD" />
		<result property="board" 	column="BOARD" />
		<result property="board" 	column="BOARD" />
		<result property="board" 	column="BOARD" />
		<result property="board" 	column="BOARD" />
		<result property="board" 	column="BOARD" />
		<result property="board" 	column="BOARD" />
		<result property="board" 	column="BOARD" />
		
	</resultMap>
	
	<!-- 전체 게시글 수 count -->
	<select id="getListCount" resultType="_int">
		SELECT COUNT(*) FROM BOARD WHERE STATUS_CD != 4
	</select>
	
	<!-- 게시글 목록 조회 -->
	<!-- <![CDATA[SQL문]]> : 내부에 작성된 태그 문자<,>를 일반 문자 자체로 인식 -->
	<select id="selectBoardList">
		<![CDATA[
		SELECT BOARD_NO, BOARD_TITLE, READ_COUNT,
		    CASE WHEN SYSDATE - CREATE_DT < 1
		        THEN TO_CHAR(CREATE_DT, 'HH:MI')
		        ELSE TO_CHAR(CREATE_DT, 'YYYY-MM-DD')
		    END "CREATE_DT",
		    MEMBER_NO, MEMBER_NM, STATUS_CD, STATUS_NM, CATEGORY_CD, CATEGORY_NM
		FROM BOARD B
		JOIN MEMBER USING(MEMBER_NO)
		JOIN STATUS S ON(S.STATUS_CD = B.STATUS_CD)
		JOIN CATEGORY USING(CATEGORY_CD)
		WHERE STATUS_CD != 4
		ORDER BY BOARD_NO DESC]]>
	</select>
</mapper>
